<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="tocook.dao.RoutineMstMapperImpl">
  <resultMap id="default" type="tocook.dto.RoutineMstDTO">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed May 18 14:25:35 JST 2022.
    -->
    <id column="routine_id" jdbcType="VARCHAR" property="routineId" />
    <result column="routine_name" jdbcType="VARCHAR" property="routineName" />
    <result column="routine_maxday" jdbcType="SMALLINT" property="routineMaxday" />
    <result column="user_id" jdbcType="VARCHAR" property="userId" />
    <result column="update_datetime" jdbcType="DATE" property="updateDatetime" />
    <result column="version" jdbcType="SMALLINT" property="version" />
    <result column="routine_eat_id" jdbcType="VARCHAR" property="routineEatId" />
    <result column="cook_id" jdbcType="VARCHAR" property="cookId" />
    <result column="routine_day" jdbcType="SMALLINT" property="routineDay" />
    <result column="routine_time" jdbcType="SMALLINT" property="routineTime" />
  </resultMap>

  <select id="selectMaxId" resultType="java.lang.String">
    SELECT
      MAX(routine_id) as routine_id
    FROM
      routine_mst
    ;
  </select>

  <select id="selectById" resultMap="default">
    SELECT
      *
    FROM
      routine_mst
    WHERE
      routine_id = #{routineId}
    AND
      user_id = #{userId}
  </select>

  <select id="selectListCount" resultType="java.lang.Integer">
    SELECT
      COUNT(*)
    FROM
      routine_mst
    WHERE
      0 = 0
    <if test = "routineId != null">
      AND routine_id = #{routineId}
    </if>
    <if test = "routineName != null">
      AND routine_name LIKE CONCAT('%', #{routineName}, '%')
    </if>
    <if test = "userId != null">
      AND user_id = #{userId}
    </if>
    ;
  </select>

  <select id="selectList" resultMap="default">
    SELECT
      *
    FROM
      routine_mst
    WHERE
      0 = 0
    <if test = "routineId != null">
      AND routine_id = #{routineId}
    </if>
    <if test = "routineName != null">
      AND routine_name LIKE CONCAT('%', #{routineName}, '%')
    </if>
    <if test = "userId != null">
      AND user_id = #{userId}
    </if>
    ORDER BY
    <if test="orderBy == 1">
      routine_id
    </if>
    <if test="orderBy == 2">
      routine_name
    </if>
    <if test="ascOrDesc == 1">
      ASC
    </if>
    <if test="ascOrDesc == 2">
      DESC
    </if>
    LIMIT
      #{limit}
    OFFSET
      #{offset}
    ;
  </select>

</mapper>
