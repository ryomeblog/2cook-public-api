<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="tocook.dao.CookFoodTblMapperImpl">
  <resultMap id="default" type="tocook.dto.CookFoodTblDTO">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Mar 13 00:22:24 JST 2022.
    -->
    <id column="cook_food_id" jdbcType="VARCHAR" property="cookFoodId" />
    <result column="cook_id" jdbcType="VARCHAR" property="cookId" />
    <result column="food_id" jdbcType="VARCHAR" property="foodId" />
    <result column="unit_value" jdbcType="BIGINT" property="unitValue" />
    <result column="cook_flg" jdbcType="BIT" property="cookFlg" />
    <result column="food_name" jdbcType="VARCHAR" property="foodName" />
    <result column="food_unit" jdbcType="VARCHAR" property="foodUnit" />
    <result column="others1" jdbcType="VARCHAR" property="others1" />
    <result column="others2" jdbcType="VARCHAR" property="others2" />
    <result column="others3" jdbcType="VARCHAR" property="others3" />
    <result column="others4" jdbcType="VARCHAR" property="others4" />
    <result column="others5" jdbcType="VARCHAR" property="others5" />
    <result column="common_value1" jdbcType="VARCHAR" property="commonValue1" />
    <result column="common_value2" jdbcType="VARCHAR" property="commonValue2" />
    <result column="update_datetime" jdbcType="DATE" property="updateDatetime" />
    <result column="version" jdbcType="SMALLINT" property="version" />
  </resultMap>

  <select id="selectMaxId" resultType="java.lang.String">
    SELECT
      MAX(cook_food_id) as cook_food_id
    FROM
      cook_food_tbl
    ;
  </select>

  <select id="selectById" resultMap="default">
    SELECT
      cook_food_tbl.cook_food_id,
      cook_food_tbl.food_name,
      cook_food_tbl.others1,
      cook_food_tbl.others2,
      cook_food_tbl.others3,
      cook_food_tbl.others4,
      cook_food_tbl.others5,
      cook_food_tbl.version,
      common_mst.common_value1,
      common_mst.common_value2
    FROM
      cook_food_tbl
    INNER JOIN
      common_mst
    ON
      cook_food_tbl.food_unit = common_mst.common_id
    WHERE
      cook_food_id = #{foodId}
    AND
      user_id = #{userId}
  </select>

  <select id="selectByCookId" resultMap="default">
    SELECT
      cook_food_tbl.cook_food_id,
      cook_food_tbl.cook_id,
      cook_food_tbl.unit_value,
      cook_food_tbl.version,
      cook_food_tbl.food_id,
      food_mst.food_name,
      food_mst.food_unit,
      food_mst.others1,
      food_mst.others2,
      food_mst.others3,
      food_mst.others4,
      food_mst.others5,
      common_mst.common_value1,
      common_mst.common_value2
    FROM
      cook_food_tbl
    INNER JOIN
      food_mst
    ON
      cook_food_tbl.food_id = food_mst.food_id
    INNER JOIN
      common_mst
    ON
      food_mst.food_unit = common_mst.common_id
    WHERE
      cook_food_tbl.cook_id = #{cookId}
  </select>

  <select id="selectListByCookId" resultMap="default">
    SELECT
      *
    FROM
      cook_food_tbl
    WHERE
      cook_id = #{cookId}
    AND
      user_id = #{userId}
    ;
  </select>

  <insert id="insertBulk" parameterType="java.util.List">
    insert into cook_food_tbl
    <trim prefix="(" suffix=")" suffixOverrides=",">
        cook_food_id,
        cook_id,
        food_id,
        unit_value,
        user_id,
    </trim>
    values
    <foreach collection="cookFoodList" item="cf" separator=",">
      <trim prefix="(" suffix=")" suffixOverrides=",">
        #{cf.cookFoodId,jdbcType=VARCHAR},
        #{cf.cookId,jdbcType=VARCHAR},
        #{cf.foodId,jdbcType=VARCHAR},
        #{cf.unitValue,jdbcType=BIGINT},
        #{cf.userId,jdbcType=VARCHAR},
      </trim>
    </foreach>
  </insert>

  <delete id="deleteByCookId" parameterType="java.lang.String">
    DELETE FROM
      cook_food_tbl
    WHERE
      cook_id = #{cookId}
  </delete>

</mapper>
